language: python
sudo: false
env:
  matrix:
    - TOXENV=py26
    - TOXENV=py27
    - TOXENV=py33
    - TOXENV=py34
    - TOXENV=pypy
    - TOXENV=flake8
addons:
  apt:
    packages:
      # Some tests do a pdf conversion, so install latex which is needed for that.
      - texlive-latex-base
      - texlive-latex-extra
      - texlive-fonts-recommended
      - texlive-latex-recommended
      - lmodern
install:
  - travis_retry pip install tox
  # only download pandoc, the tests should work without a install of pypandoc
  - python setup.py download_pandoc

script:
  - ./pypandoc/files/pandoc -v
  - python -c "import pypandoc; print(pypandoc.get_pandoc_version())"
  # make sure we use our own pandoc version
  - python -c "import sys; import pypandoc; from pypandoc.pandoc_download import INCLUDED_PANDOC_VERSION as IPV; pypandoc.get_pandoc_version() == IPV or sys.exit(-1)"
  - tox
